<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador da Sho</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
    <style>
        :root {
            --bg-body: #050505; --texto-p: #ffffff; --texto-s: rgba(255, 255, 255, 0.6); --marca: #ee4d2d;
            --glass: rgba(255, 255, 255, 0.08); --border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .light-mode {
            --bg-body: #f2f4f7; --texto-p: #1c1c1e; --texto-s: rgba(0, 0, 0, 0.5);
            --glass: rgba(255, 255, 255, 0.5); --border: 1px solid rgba(255, 255, 255, 0.6);
        }
        body { background: var(--bg-body); color: var(--texto-p); font-family: -apple-system, sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px 0; transition: 0.5s; overflow-x: hidden; }
        .blob { position: absolute; width: 400px; height: 400px; background: radial-gradient(circle, rgba(238, 77, 45, 0.15) 0%, transparent 70%); filter: blur(70px); z-index: -1; animation: move 20s infinite alternate; }
        @keyframes move { from { transform: translate(-30%, -30%); } to { transform: translate(30%, 30%); } }

        .container { text-align: center; width: 90%; max-width: 400px; padding: 30px 20px; border-radius: 45px; background: var(--glass); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); border: var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.3); position: relative; margin-bottom: 25px; }
        .theme-toggle { position: absolute; top: 25px; right: 25px; cursor: pointer; color: var(--texto-s); font-size: 20px; }
        .logo { width: 100px; border-radius: 25%; margin-bottom: 10px; }
        h1 { margin: 0 0 5px 0; font-size: 26px; font-weight: 800; letter-spacing: -1px; }
        .subtexto { color: var(--texto-s); font-size: 14px; margin-bottom: 25px; }
        
        input { width: 100%; padding: 18px 25px; margin-bottom: 12px; border-radius: 50px; background: rgba(255,255,255,0.05); color: var(--texto-p); border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box; font-size: 16px; outline: none; }
        .btn-gerar { width: 100%; padding: 18px; margin-bottom: 10px; border-radius: 50px; border: none; background: linear-gradient(170deg, #ff7a59, #ee4d2d); color: white; font-weight: 800; cursor: pointer; font-size: 17px; box-shadow: 0 10px 20px rgba(238, 77, 45, 0.3); transition: 0.3s; }

        /* RANKING LIQUID GLASS */
        .ranking-container { width: 90%; max-width: 400px; }
        .ranking-titulo { font-weight: 800; font-size: 18px; margin: 20px 0 15px 15px; display: block; }
        .ranking-card { display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 35px; background: var(--glass); border: var(--border); backdrop-filter: blur(20px); margin-bottom: 15px; }
        .prod-img { width: 70px; height: 70px; border-radius: 20px; object-fit: cover; background: #fff; }
        .prod-info { flex: 1; overflow: hidden; }
        .prod-nome { font-size: 13px; font-weight: 700; margin: 0 0 8px 0; color: var(--texto-p); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .prod-botoes { display: flex; gap: 10px; align-items: center; }
        .link-ir { font-size: 11px; color: var(--marca); text-decoration: none; font-weight: 800; }
        .btn-resgate { font-size: 10px; background: var(--marca); color: white; padding: 5px 12px; border-radius: 50px; text-decoration: none; font-weight: 900; text-transform: uppercase; }

        .resultado { margin-top: 15px; padding: 20px; border-radius: 35px; background: rgba(255,255,255,0.05); border: var(--border); }
        .sucesso-titulo { color: #30d158; font-weight: 800; font-size: 16px; display: block; margin-bottom: 10px; }
        .link-text { color: var(--marca); font-weight: 700; word-break: break-all; font-size: 14px; display: block; margin-bottom: 15px; }
        .btn-acao { display: flex; gap: 10px; }
        .btn-acao * { flex: 1; padding: 12px; border-radius: 50px; border: none; font-weight: 800; font-size: 12px; text-align: center; cursor: pointer; text-decoration: none; background: rgba(255,255,255,0.1); color: var(--texto-p); }
        .btn-abrir { background: var(--marca) !important; color: white !important; }

        #avisoCopiado { visibility: hidden; background: rgba(48, 209, 88, 0.9); color: white; border-radius: 50px; padding: 12px 30px; position: fixed; bottom: 35px; font-weight: 800; z-index: 100; backdrop-filter: blur(10px); }
        #avisoCopiado.show { visibility: visible; animation: fadeinout 2s; }
        @keyframes fadeinout { 0%, 100% { opacity: 0; transform: scale(0.9); } 20%, 80% { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>
    <div class="blob"></div>
    <div class="container">
        <div class="theme-toggle" onclick="toggleTheme()"><i id="theme-icon" class="fas fa-sun"></i></div>
        <img src="{{ url_for('static', filename='logo.png') }}" class="logo">
        <h1>Gerador da Sho</h1>
        <p class="subtexto">Produtos exclusivos Cupons da Sho üß°</p>
        <form method="POST">
            <input type="text" name="link_usuario" placeholder="Cole seu link aqui..." required>
            <button type="submit" class="btn-gerar">{% if link_novo %} GERAR OUTRO {% else %} GERAR LINK {% endif %}</button>
        </form>
        {% if link_novo %}<div class="resultado"><span class="sucesso-titulo">‚úÖ Link gerado!</span><span class="link-text" id="meuLink">{{ link_novo }}</span><div class="btn-acao"><a href="{{ link_novo }}" target="_blank" class="btn-abrir">ABRIR üõçÔ∏è</a><button onclick="copiarLink()">COPIAR</button></div></div>{% endif %}
    </div>
    {% if ranking %}<div class="ranking-container"><span class="ranking-titulo">√öltimos links gerados üíé</span>{% for item in ranking %}<div class="ranking-card"><img src="{{ item.imagem }}" class="prod-img"><div class="prod-info"><p class="prod-nome">{{ item.titulo }}</p><div class="prod-botoes"><a href="{{ item.link }}" target="_blank" class="link-ir">Ir para o produto</a><a href="{{ item.link }}" target="_blank" class="btn-resgate">Resgate</a></div></div></div>{% endfor %}</div>{% endif %}
    <script>
        function toggleTheme() { document.body.classList.toggle('light-mode'); const icon = document.getElementById('theme-icon'); if (document.body.classList.contains('light-mode')) { icon.classList.replace('fa-sun', 'fa-moon'); localStorage.setItem('theme', 'light'); } else { icon.classList.replace('fa-moon', 'fa-sun'); localStorage.setItem('theme', 'dark'); } }
        window.onload = () => { if (localStorage.getItem('theme') === 'light') { document.body.classList.add('light-mode'); document.getElementById('theme-icon').classList.replace('fa-sun', 'fa-moon'); } }
        function copiarLink() { const texto = document.getElementById('meuLink').innerText; const inputTemporario = document.createElement("textarea"); inputTemporario.value = texto; document.body.appendChild(inputTemporario); inputTemporario.select(); document.execCommand("copy"); document.body.removeChild(inputTemporario); const x = document.getElementById("avisoCopiado"); x.className = "show"; setTimeout(function(){ x.className = x.className.replace("show", ""); }, 2000); }
    </script>
    <div id="avisoCopiado">Copiado! ‚úîÔ∏è</div>
</body>
</html>
